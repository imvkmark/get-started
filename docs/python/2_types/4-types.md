# ä»‹ç» python å¯¹è±¡ç±»å‹

å¯¹è±¡ç±»å‹ä¾¿æ˜¯ python çš„å†…ç½®ç±»å‹

- å®¹æ˜“ç¼–å†™
- å¯æ‰©å±•
- æœ‰æ•ˆç‡
- è¯­è¨€æ ‡å‡†

# ç±»å‹

æˆ–è€…æ˜¯å¯ä»¥ç§°ä¹‹ä¸ºæ ¸å¿ƒæ•°æ®ç±»å‹, æ‹…å¿ƒä¸èƒ½æ˜ç¡®è¯´æ˜, è¿™é‡Œé‡‡ç”¨æˆªå›¾


![](https://file.wulicode.com/note/2023/05-08/11-38-05401.png)


ç¨‹åºå•å…ƒç±»å‹ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå¯¹è±¡ : å‡½æ•°, æ¨¡å—, ç±»

Python æ˜¯åŠ¨æ€ç±»å‹(æ— éœ€è‡ªå·±è¿›è¡Œå£°æ˜, è‡ªå·±å¯ä»¥åˆ¤å®šç±»å‹), åŒæ—¶ä¹Ÿæ˜¯å¼ºç±»å‹, å¯¹ç±»å‹è¿›è¡Œé€‚åˆæ”¹ç±»å‹çš„æœ‰æ•ˆæ“ä½œ

# æ•°å­—

### ç±»å‹

æ•´æ•°

æµ®ç‚¹æ•°

æœ‰è™šæ•°çš„å¤æ•°

å›ºå®šç²¾åº¦çš„åè¿›åˆ¶

æœ‰ç†åˆ†æ•°(å¸¦åˆ†å­å’Œåˆ†æ¯çš„)

å…¨åŠŸèƒ½é›†åˆ

### è¿ç®—

+, -, *, /, **(å¹‚è¿ç®—)

math åŒ…çš„æ•°å­¦æ¨¡å—

# å­—ç¬¦ä¸²

`dir` æ–¹æ³•å¯ä»¥åˆ—å‡ºå†…ç½®çš„å‡½æ•°åˆ—è¡¨

### å®šä¹‰

```
>>> S = 'Spam'
>>> S = "Spam"
>>> S = """
new
line
"""
>>> S = 'A\n\B\tC'     # å…ƒå­—ç¬¦
>>> ord('\n')          # è¿”å›ä½ç½®
>>> S = u'sp\xc4m'     # unicode æ–‡æœ¬
>>> S = b'z\x01c'      # åŸå§‹å­—èŠ‚å€¼ | bytes å­—ç¬¦ä¸²
>>> S = 'sp\xc4\u00c4\U000000c4m'
                       # é ascii å­—ç¬¦ \x 16 è¿›åˆ¶ \u çŸ­ unicode  \U é•¿ unicode
```

### åºåˆ—æ“ä½œ

```
>>> S = 'Spam'
>>> S[0]
'S'
>>> S[-1]
'm'
>>> S[1:3]
'pa'         # åˆ†ç‰‡æ“ä½œ(1-2) å­—ä¸²è¿”å›, ä¸åŒ…å« 3
>>> S[:]
'Spam'       # åˆ†ç‰‡å·¦å³æ²¡æœ‰é»˜è®¤å€¼, åˆ™å·¦ä¸ºç¬¬ä¸€ä¸ª, åˆä¸ºæœ€åä¸€ä¸ª
>>> S + '-my'
'Spam-my'    # å­—ä¸²æ‹¼æ¥
>>> S * 2
'SpamSpam'   # å­—ä¸²çš„é‡å¤, è¿™é‡Œä½¿ç”¨äº†å¤šæ€çš„æ¦‚å¿µæ¥å®ç°
```

### ä¸å¯å˜æ€§

è¿™é‡Œçš„ä¸å¯å˜æ€§æ˜¯æ•°å­—, å­—ç¬¦ä¸², å…ƒç»„

```
>>> S[0] = 'A'         # å­—ä¸²ä¸èƒ½è¢«éƒ¨åˆ†èµ‹å€¼, ä¹Ÿå°±æ˜¯ä»–çš„ä¸å¯å˜æ€§
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment
>>> S = 'z' + S[1:]    # å­—ä¸²å˜é‡å¯ä»¥è¦†ç›–
>>> S
'zpam'
```

å¯¹äºåˆ—è¡¨, å­—å…¸, å³å¯æ˜¯å¯ä»¥å®Œå…¨è‡ªç”±çš„è¢«æ”¹å˜çš„

åœ¨Php ä¸­, éƒ¨åˆ†èµ‹å€¼æ˜¯å¯ä»¥çš„

```
$str = 'abc';
$this->assertEquals('b', $str[1]);
$str[1] = 'a';
$this->assertEquals('aac', $str);
```

### ç‰¹å®šç±»å‹çš„æ–¹æ³•

å…¶ä»–çš„ä½¿ç”¨å‚è€ƒå­—ç¬¦ä¸²ç« èŠ‚

```
>>> S.find('p')          # æŸ¥æ‰¾å¹¶è¿”å›ç´¢å¼•
1
>>> S.replace('p', 'b')  # æ›¿æ¢
'zbam'
```

### å¸®åŠ©

è¿™å‡ ä¸ªæ–¹æ³•æä¾›çš„æ˜¯åŸå§‹çš„æ–‡æ¡£

```
>>> dir(S)           # å‡½æ•°åˆ—è¡¨
['__add__', '__class__', ..., 'translate', 'upper', 'zfill']
>>> help(S.split)    # å‡½æ•°å¸®åŠ©
Help on built-in function split:
split(sep=None, maxsplit=-1) method of builtins.str instance
    Return a list of the words in the string, using sep as the delimiter string.
    ...
>>> help(str)        # æ•°æ®ç±»å‹çš„å¸®åŠ© str, list, dict
Help on class str in module builtins:
class str(object)
 |  str(object='') -> str
 |  str(bytes_or_buffer[, encoding[, errors]]) -> str
 |
 |  Create a new string object from the given object. If encoding or
 |  errors is specified, then the object must expose a data buffer
 |  that will be decoded using the given encoding and error handler.
 |  Otherwise, returns the result of object.__str__() (if defined)
 |  or repr(object).
 ....
```

### f-string

æ ¼å¼åŒ– `{}` å†…å®¹ï¼Œä¸åœ¨ `{}` å†…çš„ç…§å¸¸å±•ç¤ºè¾“å‡ºï¼Œå¦‚æœä½ æƒ³è¾“å‡º `{}`ï¼Œé‚£å°±ç”¨åŒå±‚ `{{}}` å°†æƒ³è¾“å‡ºçš„å†…å®¹åŒ…èµ·æ¥

```
lis = [1,2,3]
print(lis, f'has a length of {len(lis)}.')
# [1,2,3] has a length of 3.
```

# åˆ—è¡¨

### å®šä¹‰

```
>>> L = [1, '1', 1.0]    # å®šä¹‰
>>> len(L)
3
>>> L[:-1]               # åˆ†ç‰‡
[1, '1']
>>> L + [2]              # é™„åŠ 
[1, '1', 1.0, 2]
>>> L * 2                # é‡å¤
[1, '1', 1.0, 1, '1', 1.0]
>>> L[1] = 'num'         # æ”¯æŒèµ‹å€¼
>>> L
[1, 'num', 1.0]
>>> L = [[1,2], [3,4], [5,6]]
                         # åµŒå¥—
```

ç‰¹å®šç±»å‹çš„æ“ä½œè§åç»­æ“ä½œ

### æ¨å¯¼

```
>>> L = [[1,2], [3,4], [5,6]]
# æŠŠ M ä¸­çš„æ¯ä¸ª row ä¸­çš„ row[0] æ‹¿å‡ºæ¥æ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­
>>> M = [row[0] for row in L]
>>> M
[1, 3, 5]
# æ•°æ®åšè¿ç®—
>>> M = [row[0] * 2 for row in L]
>>> M
[2, 6, 10]
# æ•°æ®è¿›è¡Œæ¡ä»¶å–å€¼
>>> M = [row[0] * 2 for row in L if row[1] % 4 == 0]
>>> M
[6]
# æœé›†å¹¶èµ‹å€¼
>>> M = [L[i][i] for i in [0, 1]]
>>> M
[1, 4]
# æ‹†è§£å­—ä¸²
>>> M = [c * 2 for c in 'spam']
>>> M
['ss', 'pp', 'aa', 'mm']
# ç”Ÿæˆé›†åˆ
>>> M = {L[i][0] for i in [0,1,2]}
>>> M
{1, 3, 5}
# ç”Ÿæˆå­—å…¸
>>> M = {i : L[i][0] for i in [0,1,2]}
>>> M
{0: 1, 1: 3, 2: 5}
```

# å­—å…¸

å…·æœ‰å¯å˜æ€§çš„æ˜ å°„ç±»å‹

### å®šä¹‰

```
>>> D = {'a' : 'apple', 'b' : 'banana'}
>>> D['a'] +='s'               # æ”¯æŒæ”¹å†™
>>> D
{'a': 'apples', 'b': 'banana'}
# kv èµ‹å€¼
>>> D = dict(a='apple', b='banana')
{'a': 'apple', 'b': 'banana'}
# æ˜ å°„èµ‹å€¼
>>> D = dict(zip(['a', 'b'], ['apple', 'banana']))
{'a': 'apple', 'b': 'banana'}
```

### å–æ•°æ®å’Œæ£€æŸ¥

```
# æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
>>> 'a' in D
True
>>> if not 'c' in D:
...     print('c not in D')
...
c not in D
>>> value = D.get('c', 0)
>>> value
0
>>> value = D['c'] if 'c' in D else 0
>>> value
0
```

### é”®æ’åº

python ä¸­çš„é”®é¡ºåºä¸ä¸€å®šå’Œå®šä¹‰é¡ºåºç›¸ç¬¦, æ‰€ä»¥éœ€è¦ä½¿ç”¨ sort è¿›è¡Œæ’åº

```
# è·å– keys
>>> K = list(D.keys())
>>> K
# æ’åº
>>> K.sort()
# å¾ªç¯è¾“å‡º
>>> for key in K:
...    print(key, '=>', D[key])
```

# å…ƒç»„

åƒä¸å¯å˜çš„åˆ—è¡¨, æä¾›äº†ä¸€ç§å®Œæ•´æ€§çº¦æŸ

### å®šä¹‰

```
>>> T = (1, 2, 3, 4)
>>> T + (5, 6)
```

# æ–‡ä»¶

### å®šä¹‰

```
>>> f = open('data.txt', 'w')   # æ‰“å¼€æ–‡ä»¶, å†™å…¥æ¨¡å¼
>>> f.write("Hello World \n")   # è¿”å›å†™å…¥æ–‡æœ¬çš„æ•°é‡
>>> f.close()                   # å…³é—­å¹¶è¾“å…¥åˆ°ç£ç›˜
>>> f = open('data.txt')
>>> text = f.read()
>>> text
Hello World \n
# ç¼–ç 
>>> f = open('data.txt', 'w', encoding='utf-8')
```

### äºŒè¿›åˆ¶

ğŸ’¡

è¿™é‡Œæ˜¯çœ‹ä¸æ‡‚çš„, æ‰€ä»¥æˆªå›¾è®°å½•ä¸‹æ¥, æš‚æ—¶ä¹Ÿä¸çŸ¥é“å¦‚ä½•å»ä½¿ç”¨

å¯¹äºäºŒè¿›åˆ¶æ–‡ä»¶çš„å†™å…¥å’Œè¯»å–


![](https://file.wulicode.com/note/2023/05-08/11-39-00594.png)


è¯»å–å¹¶è¿˜åŸäºŒè¿›åˆ¶æ•°æ®å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯¹ç§°çš„è¿‡ç¨‹, å¹¶éæ‰€æœ‰çš„ç¨‹åºéƒ½éœ€è¦è§¦åŠå¦‚æ­¤åº•å±‚çš„å­—èŠ‚é¢†åŸŸ, ä½† Python çš„äºŒè¿›åˆ¶æ–‡ä»¶ç®€åŒ–äº†è¿™ä¸ªè¿‡ç¨‹


![](https://file.wulicode.com/note/2023/05-08/11-39-20953.png)


# å…¶ä»–æ ¸å¿ƒç±»å‹

### é›†åˆ

å”¯ä¸€çš„ä¸å¯å˜çš„å¯¹è±¡çš„æ— åºé›†åˆ, é›†åˆé€šè¿‡è°ƒç”¨å†…ç½®å‡½æ•°è€Œåˆ›å»º, æˆ–è€…é€šè¿‡æ–°çš„é›†åˆå­—é¢é‡å’Œè¡¨è¾¾å¼åˆ›å»º, å¹¶ä¸”æ”¯æŒä¸€èˆ¬çš„æ•°å­¦é›†åˆæ“ä½œ, é›†åˆå¯ä½¿ç”¨ `{...}` è¯­æ³•, æ›´åƒæ˜¯æ²¡æœ‰å€¼çš„å­—å…¸

```
>>> X = set('spam')               # å­—é¢é‡åˆ›å»º
>>> X
{'a', 's', 'm', 'p'}
>>> Y = {'a', '4'}                # è¯­æ³•åˆ›å»º
>>> X, Y
({'a', 's', 'm', 'p'}, {'a', '4'})
>>> X & Y                         # ä½æ“ä½œ...
{'a'}
>>> X | Y
{'a', 'm', 'p', '4', 's'}
>>> X - Y                         # æ•°å­¦æ“ä½œ
{'s', 'm', 'p'}
>>> X > Y                         # è¶…é›†æ“ä½œ
False
>>> 'm' in X                      # in åˆ¤å®š
True
```

é›†åˆåœ¨æ•°å­¦ä¸Šç”¨ä½œè¿‡æ»¤é‡å¤å¯¹è±¡, åˆ†ç¦»é›†åˆé—´å·®å¼‚, è¿›è¡Œéé¡ºåºç­‰ä»·åˆ¤æ–­çš„åˆ©å™¨

```
>>> 1 / 3                     # æµ®ç‚¹æ•°
>>> import decimal            # å›ºå®šç²¾åº¦æ•°å€¼
>>> decimal.Decimal('3.141')
Decimal('3.141')
>>> from fractions import Fraction
>>> f = Fraction(1, 3)        # åˆ†æ•° (1 / 3) + 1 = (4 / 3)
>>> f + 1
Fraction(4, 3)
>>> 1 > 2                     # å¸ƒå°”å€¼, Python å¸ƒå°”å€¼å†™æ³•æ˜¯å‚²å¨‡çš„, é¦–å­—æ¯æ°¸è¿œå¤§å†™
False
>>> X = None                  # ç‰¹æ®Šçš„å ä½ç¬¦å¯¹è±¡, ç”¨æ¥åˆå§‹åŒ–å˜é‡å’Œå¯¹è±¡
```

### å¦‚ä½•ç ´åä»£ç çš„çµæ´»æ€§

é™ä½çµæ´»æ€§çš„ä¸€ä¸ªæ“ä½œå°±æ˜¯ç±»å‹åˆ¤å®š

```
>>> L = []                    # å®šä¹‰
>>> type(L)
<class 'list'>
>>> type(type(L))             # è¿”å›
<class 'type'>
>>> type(L) == list           # åˆ¤å®š
True
>>> type(L) == type([])
True
>>> isinstance(L, list)
True
```

# ç±»çš„è‡ªå®šä¹‰

```
class Worker:
    def __init__(self, name, pay) :     # self æ˜¯éšå«çš„å¯¹è±¡, ä¸€ä¸ªç±»ä¸­æ€»æœ‰ä¸€ä¸ªéšå«çš„å¯¹è±¡
				self.name = name
				self.pay  = pay
		def lastName(self):
				return self.name.split()[-1]
		def giveRaise(self, percent):
				self.pay *= (1.0 + percent)
>>> bob = Worker('Mark Zhao', 428)
>>> bob.lastName()
'Zhao'
>>> bob.giveRaise(.1)
>>> self.pay
470.8
```