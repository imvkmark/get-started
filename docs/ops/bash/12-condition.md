# 条件判断

跟其它程序设计语言一样，Bash 中的条件语句让我们可以决定一个操作是否被执行。结果取决于一个包在 `[[ ]]` 里的表达式。

由 `[[ ]]` （ `sh` 中是 `[ ]` ）包起来的表达式被称作 **检测命令** 或 **基元**
。这些表达式帮助我们检测一个条件的结果。这里可以找到有关 [bash 中单双中括号区别](http://serverfault.com/a/52050) 的答案。

共有两个不同的条件表达式： `if` 和 `case` 。

## `if`

`if` 在使用上跟其它语言相同。如果中括号里的表达式为真，那么 `then` 和

`fi` 之间的代码会被执行。 `fi` 标志着条件代码块的结束。

<<< @/ops/bash/src/12-condition/if.sh

同样，可以使用 `if..else` 语句 或者 `if..elif..else` ，使用起来也很方便。

<<< @/ops/bash/src/12-condition/if-el.sh

拆解 if command

<<< @/ops/bash/src/12-condition/if-cmd.sh

`[]` 和 `[[]]` 的区别

`[]` 单中括号

a.  `[]` 两个符号左右都要有空格分隔

b. 内部操作符与操作变量之间要有空格：如 `[ "a" = "b" ]`

c. 字符串比较中，`>` `<` 需要写成`>` `\<` 进行转义

d.  `[]` 中字符串或者 `${}` 变量尽量使用 `"` 双引号扩住，以避免值未定义引用而出错

e.  `[]` 中可以使用 --a --o 进行逻辑运算

f.  `[]` 是bash 内置命令：`[` is a shell builtin

`[[]]` 双中括号

双方括号提供了字符串比较的高级特性, 可以定义一些正则表达式来匹配字符串, 但是并非所有的 shell 都支持双方括号

a.  `[[]]` 两个符号左右都要有空格分隔

b. 内部操作符与操作变量之间要有空格：如 `[[ "a" = "b" ]]`

c. 字符串比较中，可以直接使用 `>` `<` 无需转义

d.  `[[]]` 中字符串或者 `${}` 变量尽量使用 `""` 双引号扩住，如未使用`""` 会进行模式和元字符匹配

e.  `[[]]` 内部可以使用 `&&` `||` 进行逻辑运算

f.  `[[]]` 是bash keyword：`[[` is a shell keyword

## `case`

如果你需要面对很多情况，分别要采取不同的措施，那么使用 `case` 会比嵌套的

`if` 更有用。使用 `case` 来解决复杂的条件判断，看起来像下面这样：

<<< @/ops/bash/src/12-condition/case.sh

每种情况都是匹配了某个模式的表达式。 `|` 用来分割多个模式， `)` 用来结束一个模式序列。第一个匹配上的模式对应的命令将会被执行。 `*`
代表任何不匹配以上给定模式的模式。命令块儿之间要用 `;;` 分隔。